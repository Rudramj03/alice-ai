{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\LENOVO\\\\OneDrive\\\\Documents\\\\Alice\\\\frontend\\\\src\\\\Orb.js\",\n  _s = $RefreshSig$();\nimport { useEffect, useRef } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;\n\n// ðŸŒ¸ Flower-inspired palette (matches background)\nconst FLOWER_COLORS = [\"#8b7cff\",\n// lavender\n\"#ff6b5c\",\n// red flowers\n\"#7cffd7\",\n// green\n\"#9fb4ff\" // icy blue\n];\nexport default function Orb({\n  onCommand\n}) {\n  _s();\n  const canvasRef = useRef(null);\n  const analyserRef = useRef(null);\n  const dataRef = useRef(null);\n  const audioCtxRef = useRef(null);\n  const listeningRef = useRef(false);\n  useEffect(() => {\n    const canvas = canvasRef.current;\n    const ctx = canvas.getContext(\"2d\");\n    canvas.width = 500;\n    canvas.height = 220;\n\n    /* ================= ORB (IDLE) ================= */\n    const drawOrb = t => {\n      ctx.clearRect(0, 0, canvas.width, canvas.height);\n      const cx = canvas.width / 2;\n      const cy = canvas.height / 2;\n      const r = 55 + Math.sin(t * 0.002) * 6;\n      const g = ctx.createRadialGradient(cx, cy, r * 0.2, cx, cy, r);\n      g.addColorStop(0, \"#9fb4ff\");\n      g.addColorStop(0.6, \"#6f7bff\");\n      g.addColorStop(1, \"rgba(111,123,255,0.15)\");\n      ctx.beginPath();\n      ctx.arc(cx, cy, r, 0, Math.PI * 2);\n      ctx.fillStyle = g;\n      ctx.fill();\n    };\n\n    /* ================= AUDIO WAVES ================= */\n    const drawWaves = () => {\n      const analyser = analyserRef.current;\n      const data = dataRef.current;\n      if (!analyser || !data) return;\n      analyser.getByteFrequencyData(data);\n      ctx.clearRect(0, 0, canvas.width, canvas.height);\n      const barWidth = canvas.width / data.length;\n      data.forEach((v, i) => {\n        const intensity = v / 255; // 0 â†’ 1\n        const height = intensity * canvas.height * 0.85;\n        const color = FLOWER_COLORS[i % FLOWER_COLORS.length];\n        ctx.strokeStyle = color;\n        ctx.globalAlpha = 0.3 + intensity * 0.7;\n        ctx.lineWidth = 3;\n        ctx.beginPath();\n        ctx.moveTo(i * barWidth, canvas.height / 2 - height / 2);\n        ctx.lineTo(i * barWidth, canvas.height / 2 + height / 2);\n        ctx.stroke();\n      });\n      ctx.globalAlpha = 1;\n    };\n\n    /* ================= ANIMATION LOOP ================= */\n    let raf;\n    const animate = t => {\n      if (listeningRef.current) {\n        drawWaves();\n      } else {\n        drawOrb(t);\n      }\n      raf = requestAnimationFrame(animate);\n    };\n    animate(0);\n    return () => cancelAnimationFrame(raf);\n  }, []);\n\n  /* ================= CLICK = LISTEN ================= */\n  const startListening = async () => {\n    if (!SpeechRecognition) {\n      alert(\"Speech recognition not supported in this browser\");\n      return;\n    }\n    listeningRef.current = true;\n\n    // ðŸŽ§ Microphone + audio analyzer\n    const stream = await navigator.mediaDevices.getUserMedia({\n      audio: true\n    });\n    audioCtxRef.current = new AudioContext();\n    const source = audioCtxRef.current.createMediaStreamSource(stream);\n    analyserRef.current = audioCtxRef.current.createAnalyser();\n    analyserRef.current.fftSize = 64;\n    dataRef.current = new Uint8Array(analyserRef.current.frequencyBinCount);\n    source.connect(analyserRef.current);\n\n    // ðŸ—£ï¸ Speech recognition\n    const recognition = new SpeechRecognition();\n    recognition.lang = \"en-US\";\n    recognition.start();\n    recognition.onresult = e => {\n      listeningRef.current = false;\n      const text = e.results[0][0].transcript;\n      audioCtxRef.current.close();\n      onCommand(text);\n    };\n    recognition.onerror = () => {\n      listeningRef.current = false;\n      audioCtxRef.current.close();\n    };\n  };\n  return /*#__PURE__*/_jsxDEV(\"canvas\", {\n    ref: canvasRef,\n    className: \"orb-canvas\",\n    onClick: startListening,\n    title: \"Tap and speak\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 132,\n    columnNumber: 5\n  }, this);\n}\n_s(Orb, \"QdUWfyss+8NQl/vEiuMFXvz6uHw=\");\n_c = Orb;\nvar _c;\n$RefreshReg$(_c, \"Orb\");","map":{"version":3,"names":["useEffect","useRef","jsxDEV","_jsxDEV","SpeechRecognition","window","webkitSpeechRecognition","FLOWER_COLORS","Orb","onCommand","_s","canvasRef","analyserRef","dataRef","audioCtxRef","listeningRef","canvas","current","ctx","getContext","width","height","drawOrb","t","clearRect","cx","cy","r","Math","sin","g","createRadialGradient","addColorStop","beginPath","arc","PI","fillStyle","fill","drawWaves","analyser","data","getByteFrequencyData","barWidth","length","forEach","v","i","intensity","color","strokeStyle","globalAlpha","lineWidth","moveTo","lineTo","stroke","raf","animate","requestAnimationFrame","cancelAnimationFrame","startListening","alert","stream","navigator","mediaDevices","getUserMedia","audio","AudioContext","source","createMediaStreamSource","createAnalyser","fftSize","Uint8Array","frequencyBinCount","connect","recognition","lang","start","onresult","e","text","results","transcript","close","onerror","ref","className","onClick","title","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/LENOVO/OneDrive/Documents/Alice/frontend/src/Orb.js"],"sourcesContent":["import { useEffect, useRef } from \"react\";\r\n\r\nconst SpeechRecognition =\r\n  window.SpeechRecognition || window.webkitSpeechRecognition;\r\n\r\n// ðŸŒ¸ Flower-inspired palette (matches background)\r\nconst FLOWER_COLORS = [\r\n  \"#8b7cff\", // lavender\r\n  \"#ff6b5c\", // red flowers\r\n  \"#7cffd7\", // green\r\n  \"#9fb4ff\", // icy blue\r\n];\r\n\r\nexport default function Orb({ onCommand }) {\r\n  const canvasRef = useRef(null);\r\n  const analyserRef = useRef(null);\r\n  const dataRef = useRef(null);\r\n  const audioCtxRef = useRef(null);\r\n  const listeningRef = useRef(false);\r\n\r\n  useEffect(() => {\r\n    const canvas = canvasRef.current;\r\n    const ctx = canvas.getContext(\"2d\");\r\n\r\n    canvas.width = 500;\r\n    canvas.height = 220;\r\n\r\n    /* ================= ORB (IDLE) ================= */\r\n    const drawOrb = (t) => {\r\n      ctx.clearRect(0, 0, canvas.width, canvas.height);\r\n\r\n      const cx = canvas.width / 2;\r\n      const cy = canvas.height / 2;\r\n      const r = 55 + Math.sin(t * 0.002) * 6;\r\n\r\n      const g = ctx.createRadialGradient(cx, cy, r * 0.2, cx, cy, r);\r\n      g.addColorStop(0, \"#9fb4ff\");\r\n      g.addColorStop(0.6, \"#6f7bff\");\r\n      g.addColorStop(1, \"rgba(111,123,255,0.15)\");\r\n\r\n      ctx.beginPath();\r\n      ctx.arc(cx, cy, r, 0, Math.PI * 2);\r\n      ctx.fillStyle = g;\r\n      ctx.fill();\r\n    };\r\n\r\n    /* ================= AUDIO WAVES ================= */\r\n    const drawWaves = () => {\r\n      const analyser = analyserRef.current;\r\n      const data = dataRef.current;\r\n      if (!analyser || !data) return;\r\n\r\n      analyser.getByteFrequencyData(data);\r\n      ctx.clearRect(0, 0, canvas.width, canvas.height);\r\n\r\n      const barWidth = canvas.width / data.length;\r\n\r\n      data.forEach((v, i) => {\r\n        const intensity = v / 255; // 0 â†’ 1\r\n        const height = intensity * canvas.height * 0.85;\r\n\r\n        const color = FLOWER_COLORS[i % FLOWER_COLORS.length];\r\n        ctx.strokeStyle = color;\r\n        ctx.globalAlpha = 0.3 + intensity * 0.7;\r\n        ctx.lineWidth = 3;\r\n\r\n        ctx.beginPath();\r\n        ctx.moveTo(i * barWidth, canvas.height / 2 - height / 2);\r\n        ctx.lineTo(i * barWidth, canvas.height / 2 + height / 2);\r\n        ctx.stroke();\r\n      });\r\n\r\n      ctx.globalAlpha = 1;\r\n    };\r\n\r\n    /* ================= ANIMATION LOOP ================= */\r\n    let raf;\r\n    const animate = (t) => {\r\n      if (listeningRef.current) {\r\n        drawWaves();\r\n      } else {\r\n        drawOrb(t);\r\n      }\r\n      raf = requestAnimationFrame(animate);\r\n    };\r\n\r\n    animate(0);\r\n    return () => cancelAnimationFrame(raf);\r\n  }, []);\r\n\r\n  /* ================= CLICK = LISTEN ================= */\r\n  const startListening = async () => {\r\n    if (!SpeechRecognition) {\r\n      alert(\"Speech recognition not supported in this browser\");\r\n      return;\r\n    }\r\n\r\n    listeningRef.current = true;\r\n\r\n    // ðŸŽ§ Microphone + audio analyzer\r\n    const stream = await navigator.mediaDevices.getUserMedia({ audio: true });\r\n    audioCtxRef.current = new AudioContext();\r\n    const source = audioCtxRef.current.createMediaStreamSource(stream);\r\n    analyserRef.current = audioCtxRef.current.createAnalyser();\r\n    analyserRef.current.fftSize = 64;\r\n\r\n    dataRef.current = new Uint8Array(\r\n      analyserRef.current.frequencyBinCount\r\n    );\r\n\r\n    source.connect(analyserRef.current);\r\n\r\n    // ðŸ—£ï¸ Speech recognition\r\n    const recognition = new SpeechRecognition();\r\n    recognition.lang = \"en-US\";\r\n    recognition.start();\r\n\r\n    recognition.onresult = (e) => {\r\n      listeningRef.current = false;\r\n      const text = e.results[0][0].transcript;\r\n      audioCtxRef.current.close();\r\n      onCommand(text);\r\n    };\r\n\r\n    recognition.onerror = () => {\r\n      listeningRef.current = false;\r\n      audioCtxRef.current.close();\r\n    };\r\n  };\r\n\r\n  return (\r\n    <canvas\r\n      ref={canvasRef}\r\n      className=\"orb-canvas\"\r\n      onClick={startListening}\r\n      title=\"Tap and speak\"\r\n    />\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}