{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\LENOVO\\\\OneDrive\\\\Documents\\\\Alice\\\\frontend\\\\src\\\\Orb.js\",\n  _s = $RefreshSig$();\nimport { useEffect, useRef } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;\nexport default function Orb({\n  state,\n  onCommand\n}) {\n  _s();\n  const canvasRef = useRef(null);\n  const audioCtxRef = useRef(null);\n  const analyserRef = useRef(null);\n  const dataRef = useRef(null);\n  const listeningRef = useRef(false);\n  useEffect(() => {\n    const canvas = canvasRef.current;\n    const ctx = canvas.getContext(\"2d\");\n    canvas.width = 500;\n    canvas.height = 200;\n    const drawOrb = t => {\n      ctx.clearRect(0, 0, canvas.width, canvas.height);\n      const cx = canvas.width / 2;\n      const cy = canvas.height / 2;\n      const r = 60 + Math.sin(t * 0.002) * 8;\n      const g = ctx.createRadialGradient(cx, cy, r * 0.2, cx, cy, r);\n      g.addColorStop(0, \"#9fb4ff\");\n      g.addColorStop(0.6, \"#6f7bff\");\n      g.addColorStop(1, \"rgba(111,123,255,0.15)\");\n      ctx.beginPath();\n      ctx.arc(cx, cy, r, 0, Math.PI * 2);\n      ctx.fillStyle = g;\n      ctx.fill();\n    };\n    const drawWaves = () => {\n      const analyser = analyserRef.current;\n      const data = dataRef.current;\n      if (!analyser || !data) return;\n      analyser.getByteFrequencyData(data);\n      ctx.clearRect(0, 0, canvas.width, canvas.height);\n      const colors = [\"#7f9cff\", \"#9f7cff\", \"#7cffd7\"];\n      const barWidth = canvas.width / data.length;\n      data.forEach((v, i) => {\n        const h = v / 255 * canvas.height * 0.8;\n        ctx.strokeStyle = colors[i % colors.length];\n        ctx.beginPath();\n        ctx.moveTo(i * barWidth, canvas.height / 2 - h / 2);\n        ctx.lineTo(i * barWidth, canvas.height / 2 + h / 2);\n        ctx.stroke();\n      });\n    };\n    let raf;\n    const animate = t => {\n      if (listeningRef.current) {\n        drawWaves();\n      } else {\n        drawOrb(t);\n      }\n      raf = requestAnimationFrame(animate);\n    };\n    animate(0);\n    return () => cancelAnimationFrame(raf);\n  }, []);\n\n  // ðŸŽ™ï¸ Start listening + waveform\n  const startListening = async () => {\n    if (!SpeechRecognition) {\n      alert(\"Speech recognition not supported\");\n      return;\n    }\n    listeningRef.current = true;\n\n    // ðŸŽ§ Mic â†’ Audio Analyzer\n    const stream = await navigator.mediaDevices.getUserMedia({\n      audio: true\n    });\n    audioCtxRef.current = new AudioContext();\n    const source = audioCtxRef.current.createMediaStreamSource(stream);\n    analyserRef.current = audioCtxRef.current.createAnalyser();\n    analyserRef.current.fftSize = 64;\n    dataRef.current = new Uint8Array(analyserRef.current.frequencyBinCount);\n    source.connect(analyserRef.current);\n\n    // ðŸ—£ï¸ Speech Recognition\n    const recognition = new SpeechRecognition();\n    recognition.lang = \"en-US\";\n    recognition.start();\n    recognition.onresult = e => {\n      listeningRef.current = false;\n      const text = e.results[0][0].transcript;\n      onCommand(text);\n      audioCtxRef.current.close();\n    };\n    recognition.onerror = () => {\n      listeningRef.current = false;\n      audioCtxRef.current.close();\n    };\n  };\n  return /*#__PURE__*/_jsxDEV(\"canvas\", {\n    ref: canvasRef,\n    className: \"orb-canvas\",\n    onClick: startListening,\n    title: \"Tap and speak\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 110,\n    columnNumber: 5\n  }, this);\n}\n_s(Orb, \"KK6kMq1U0RGZNlEl0/Lz8cOQPy8=\");\n_c = Orb;\nvar _c;\n$RefreshReg$(_c, \"Orb\");","map":{"version":3,"names":["useEffect","useRef","jsxDEV","_jsxDEV","SpeechRecognition","window","webkitSpeechRecognition","Orb","state","onCommand","_s","canvasRef","audioCtxRef","analyserRef","dataRef","listeningRef","canvas","current","ctx","getContext","width","height","drawOrb","t","clearRect","cx","cy","r","Math","sin","g","createRadialGradient","addColorStop","beginPath","arc","PI","fillStyle","fill","drawWaves","analyser","data","getByteFrequencyData","colors","barWidth","length","forEach","v","i","h","strokeStyle","moveTo","lineTo","stroke","raf","animate","requestAnimationFrame","cancelAnimationFrame","startListening","alert","stream","navigator","mediaDevices","getUserMedia","audio","AudioContext","source","createMediaStreamSource","createAnalyser","fftSize","Uint8Array","frequencyBinCount","connect","recognition","lang","start","onresult","e","text","results","transcript","close","onerror","ref","className","onClick","title","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/LENOVO/OneDrive/Documents/Alice/frontend/src/Orb.js"],"sourcesContent":["import { useEffect, useRef } from \"react\";\r\n\r\nconst SpeechRecognition =\r\n  window.SpeechRecognition || window.webkitSpeechRecognition;\r\n\r\nexport default function Orb({ state, onCommand }) {\r\n  const canvasRef = useRef(null);\r\n  const audioCtxRef = useRef(null);\r\n  const analyserRef = useRef(null);\r\n  const dataRef = useRef(null);\r\n  const listeningRef = useRef(false);\r\n\r\n  useEffect(() => {\r\n    const canvas = canvasRef.current;\r\n    const ctx = canvas.getContext(\"2d\");\r\n\r\n    canvas.width = 500;\r\n    canvas.height = 200;\r\n\r\n    const drawOrb = (t) => {\r\n      ctx.clearRect(0, 0, canvas.width, canvas.height);\r\n\r\n      const cx = canvas.width / 2;\r\n      const cy = canvas.height / 2;\r\n      const r = 60 + Math.sin(t * 0.002) * 8;\r\n\r\n      const g = ctx.createRadialGradient(cx, cy, r * 0.2, cx, cy, r);\r\n      g.addColorStop(0, \"#9fb4ff\");\r\n      g.addColorStop(0.6, \"#6f7bff\");\r\n      g.addColorStop(1, \"rgba(111,123,255,0.15)\");\r\n\r\n      ctx.beginPath();\r\n      ctx.arc(cx, cy, r, 0, Math.PI * 2);\r\n      ctx.fillStyle = g;\r\n      ctx.fill();\r\n    };\r\n\r\n    const drawWaves = () => {\r\n      const analyser = analyserRef.current;\r\n      const data = dataRef.current;\r\n      if (!analyser || !data) return;\r\n\r\n      analyser.getByteFrequencyData(data);\r\n      ctx.clearRect(0, 0, canvas.width, canvas.height);\r\n\r\n      const colors = [\"#7f9cff\", \"#9f7cff\", \"#7cffd7\"];\r\n      const barWidth = canvas.width / data.length;\r\n\r\n      data.forEach((v, i) => {\r\n        const h = (v / 255) * canvas.height * 0.8;\r\n        ctx.strokeStyle = colors[i % colors.length];\r\n        ctx.beginPath();\r\n        ctx.moveTo(i * barWidth, canvas.height / 2 - h / 2);\r\n        ctx.lineTo(i * barWidth, canvas.height / 2 + h / 2);\r\n        ctx.stroke();\r\n      });\r\n    };\r\n\r\n    let raf;\r\n    const animate = (t) => {\r\n      if (listeningRef.current) {\r\n        drawWaves();\r\n      } else {\r\n        drawOrb(t);\r\n      }\r\n      raf = requestAnimationFrame(animate);\r\n    };\r\n\r\n    animate(0);\r\n    return () => cancelAnimationFrame(raf);\r\n  }, []);\r\n\r\n  // ðŸŽ™ï¸ Start listening + waveform\r\n  const startListening = async () => {\r\n    if (!SpeechRecognition) {\r\n      alert(\"Speech recognition not supported\");\r\n      return;\r\n    }\r\n\r\n    listeningRef.current = true;\r\n\r\n    // ðŸŽ§ Mic â†’ Audio Analyzer\r\n    const stream = await navigator.mediaDevices.getUserMedia({ audio: true });\r\n    audioCtxRef.current = new AudioContext();\r\n    const source = audioCtxRef.current.createMediaStreamSource(stream);\r\n    analyserRef.current = audioCtxRef.current.createAnalyser();\r\n    analyserRef.current.fftSize = 64;\r\n    dataRef.current = new Uint8Array(analyserRef.current.frequencyBinCount);\r\n    source.connect(analyserRef.current);\r\n\r\n    // ðŸ—£ï¸ Speech Recognition\r\n    const recognition = new SpeechRecognition();\r\n    recognition.lang = \"en-US\";\r\n    recognition.start();\r\n\r\n    recognition.onresult = (e) => {\r\n      listeningRef.current = false;\r\n      const text = e.results[0][0].transcript;\r\n      onCommand(text);\r\n      audioCtxRef.current.close();\r\n    };\r\n\r\n    recognition.onerror = () => {\r\n      listeningRef.current = false;\r\n      audioCtxRef.current.close();\r\n    };\r\n  };\r\n\r\n  return (\r\n    <canvas\r\n      ref={canvasRef}\r\n      className=\"orb-canvas\"\r\n      onClick={startListening}\r\n      title=\"Tap and speak\"\r\n    />\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}